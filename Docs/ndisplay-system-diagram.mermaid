graph TB
    subgraph "Switchboard Plus System"
        subgraph "관리자"
            Admin[관리자]
            WebUI[웹 브라우저<br/>SB+ Dashboard]
        end

        subgraph "SB+ Server"
            WebServer[웹 서버<br/>Node.js + Express]
            SocketIO[Socket.io<br/>실시간 통신]
            Database[(SQLite<br/>데이터베이스)]
            AutoDiscovery[자동 검색<br/>UDP 리스너]
            Scheduler[스케줄러<br/>node-cron]
            
            WebServer --> SocketIO
            WebServer --> Database
            AutoDiscovery --> Database
            Scheduler --> WebServer
        end

        subgraph "SB+ Control Engine"
            PresetEngine[프리셋 엔진]
            GroupEngine[그룹 엔진]
            ExecutionQueue[실행 큐]
            
            PresetEngine --> ExecutionQueue
            GroupEngine --> ExecutionQueue
        end

        subgraph "SB+ Client 1"
            Tray1[SB+ Tray<br/>Python]
            Monitor1[리소스 모니터<br/>psutil]
            UE1[언리얼엔진<br/>nDisplay]
            
            Tray1 --> Monitor1
            Tray1 --> UE1
        end

        subgraph "SB+ Client 2"
            Tray2[SB+ Tray<br/>Python]
            Monitor2[리소스 모니터<br/>psutil]
            UE2[언리얼엔진<br/>nDisplay]
            
            Tray2 --> Monitor2
            Tray2 --> UE2
        end

        subgraph "SB+ Client N"
            TrayN[SB+ Tray<br/>Python]
            MonitorN[리소스 모니터<br/>psutil]
            UEN[언리얼엔진<br/>nDisplay]
            
            TrayN --> MonitorN
            TrayN --> UEN
        end
    end

    %% 사용자 인터랙션
    Admin --> WebUI
    WebUI -.->|HTTP/WebSocket| WebServer

    %% 제어 흐름
    WebServer --> PresetEngine
    WebServer --> GroupEngine
    ExecutionQueue -->|명령 전송| Tray1
    ExecutionQueue -->|명령 전송| Tray2
    ExecutionQueue -->|명령 전송| TrayN

    %% 자동 검색
    Tray1 -.->|UDP 브로드캐스트| AutoDiscovery
    Tray2 -.->|UDP 브로드캐스트| AutoDiscovery
    TrayN -.->|UDP 브로드캐스트| AutoDiscovery

    %% 상태 모니터링
    Monitor1 -.->|메트릭 전송| SocketIO
    Monitor2 -.->|메트릭 전송| SocketIO
    MonitorN -.->|메트릭 전송| SocketIO

    %% 스타일 정의
    classDef userStyle fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef serverStyle fill:#e8f5e9,stroke:#388e3c,stroke-width:2px
    classDef controlStyle fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef clientStyle fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef engineStyle fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px

    class Admin,WebUI userStyle
    class WebServer,SocketIO,Database,AutoDiscovery,Scheduler serverStyle
    class PresetEngine,GroupEngine,ExecutionQueue controlStyle
    class Tray1,Tray2,TrayN,Monitor1,Monitor2,MonitorN clientStyle
    class UE1,UE2,UEN engineStyle